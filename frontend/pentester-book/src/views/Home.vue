/* eslint-disable */
<template>
  <div>
    <h1>Command List</h1>
    <div v-if="loading">Loading...</div>
    <div v-else>
      <ul>
        <li v-for="command in commands" :key="command.id">
          <router-link :to="{ name: 'Command', params: { id: command.id } }">
            {{ command.name }}
          </router-link>
        </li>
      </ul>
    </div>
  </div>
</template>

<script>
import { computed, ref, onMounted } from "vue";
import { useStore } from "vuex";

export default {
  name: "HomePage",
  setup() {
    const store = useStore();
    const loading = ref(true);

    const commands = computed(() => store.state.commands);

    onMounted(async () => {
      await store.dispatch("fetchCommands");
      loading.value = false;
    });

    return {
      commands,
      loading,
    };
  },
};
</script>
